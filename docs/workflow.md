# Workflow - Правила выполнения работ

> **Базовые документы:** [vision.md](../vision.md) | [conventions.md](../conventions.md) | [tasklist.md](tasklist.md)

## 🎯 Основной принцип

**Строго следовать плану из [tasklist.md](tasklist.md)**
- Итерации выполняются последовательно (1 → 2 → 3 → ...)
- Никаких отклонений от плана без согласования
- Каждая итерация завершается полностью перед переходом к следующей

---

## 📋 Цикл выполнения итерации

### 1️⃣ Планирование

**Перед началом итерации:**
- [ ] Изучить задачи текущей итерации из tasklist.md
- [ ] Предложить решение с отрезками кода для каждой задачи
- [ ] Показать структуру файлов и ключевые методы
- [ ] **Дождаться согласования от разработчика**

**Формат предложения:**
```markdown
## Итерация N: [Название]

### Структура
- файл1.py - краткое описание
- файл2.py - краткое описание

### Ключевые фрагменты кода
[Показать сигнатуры классов и методов]

Согласовать?
```

### 2️⃣ Реализация

**После согласования:**
- [ ] Создать/изменить файлы согласно плану
- [ ] Следовать [conventions.md](../conventions.md) (1 класс = 1 файл, KISS, async)
- [ ] Следовать [vision.md](../vision.md) для технических решений
- [ ] Добавить необходимое логирование
- [ ] Проверить code style (PEP 8, type hints)

### 3️⃣ Проверка

**После реализации:**
- [ ] Выполнить тест из tasklist.md для текущей итерации
- [ ] Показать результаты тестирования
- [ ] Исправить ошибки при наличии
- [ ] **Дождаться подтверждения от разработчика**

### 4️⃣ Фиксация

**После подтверждения:**
- [ ] Обновить таблицу прогресса в tasklist.md (статус ✅ Done, дата)
- [ ] Отметить все выполненные задачи чекбоксами [x]
- [ ] Создать коммит: `git commit -m "feat: iteration N - [название]"`
- [ ] **Согласовать переход к следующей итерации**

---

## 🔄 Пример workflow

```
┌─────────────────────────────────────────────────────┐
│ 1. Планирование                                     │
│    - Изучить итерацию                              │
│    - Предложить решение                            │
│    → Ожидание согласования                         │
└─────────────────────────────────────────────────────┘
                         ↓
┌─────────────────────────────────────────────────────┐
│ 2. Реализация                                       │
│    - Создать файлы                                 │
│    - Реализовать код                               │
│    - Следовать conventions                         │
└─────────────────────────────────────────────────────┘
                         ↓
┌─────────────────────────────────────────────────────┐
│ 3. Проверка                                         │
│    - Выполнить тест                                │
│    - Показать результаты                           │
│    → Ожидание подтверждения                        │
└─────────────────────────────────────────────────────┘
                         ↓
┌─────────────────────────────────────────────────────┐
│ 4. Фиксация                                         │
│    - Обновить tasklist.md                          │
│    - Сделать коммит                                │
│    → Согласовать переход к следующей итерации      │
└─────────────────────────────────────────────────────┘
```

---

## ⚠️ Важные правила

### Обязательные точки согласования
1. **Перед реализацией** - предложить решение и дождаться одобрения
2. **После реализации** - дождаться подтверждения тестирования
3. **Переход к следующей итерации** - получить явное разрешение

### Что делать при проблемах
- **Ошибка в коде** - исправить и повторить тест
- **Неясность в задаче** - задать вопрос перед реализацией
- **Блокер** - обновить статус на ❌ Blocked с описанием проблемы

### Обновление tasklist.md
- Обновляется **только после успешного тестирования**
- Формат даты: `YYYY-MM-DD`
- Статусы: ⏳ Pending → 🔄 In Progress → ✅ Done

### Коммиты
**Формат сообщения:**
```
feat: iteration N - краткое описание

- задача 1
- задача 2
- задача 3
```

**Примеры:**
```
feat: iteration 1 - project setup and config
feat: iteration 2 - llm client integration
feat: iteration 3 - conversation manager
```

---

## 📝 Checklist перед каждой итерацией

- [ ] Изучены задачи из tasklist.md
- [ ] Изучены требования из vision.md
- [ ] Изучены правила из conventions.md
- [ ] Подготовлен план с фрагментами кода
- [ ] План согласован с разработчиком

## 📝 Checklist после каждой итерации

- [ ] Все задачи реализованы
- [ ] Тест выполнен успешно
- [ ] Подтверждение получено
- [ ] tasklist.md обновлен (таблица + чекбоксы)
- [ ] Коммит создан
- [ ] Разрешение на следующую итерацию получено

---

## 🚀 Начало работы

**Перед стартом убедиться:**
1. ✅ Файл [vision.md](../vision.md) изучен
2. ✅ Файл [conventions.md](../conventions.md) изучен
3. ✅ Файл [tasklist.md](tasklist.md) изучен
4. ✅ Репозиторий готов к работе

**Первая команда:**
```
"Начинаем итерацию 1 по tasklist.md. Предлагаю решение..."
```

---

**Версия:** 1.0  
**Создан:** 2025-01-15  
**Принцип:** KISS - Keep It Simple, Sequential

