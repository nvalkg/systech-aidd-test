# DevOps

![Build Status](https://github.com/nvalkg/systech-aidd-test/actions/workflows/build.yml/badge.svg)

–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è DevOps –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ AIDD Bot.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ .env —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
cd devops
docker-compose up
```

**–°–µ—Ä–≤–∏—Å—ã:**
- üóÑÔ∏è PostgreSQL: –ø–æ—Ä—Ç 5433
- ü§ñ Bot: Telegram
- üîå API: http://localhost:8000
- üåê Frontend: http://localhost:3000

üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** [Docker Quickstart](doc/guides/docker-quickstart.md)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö –æ–±—Ä–∞–∑–æ–≤

–û–±—Ä–∞–∑—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ GitHub Actions –∏ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ GitHub Container Registry:

```bash
# –ó–∞–ø—É—Å–∫ —Å –≥–æ—Ç–æ–≤—ã–º–∏ –æ–±—Ä–∞–∑–∞–º–∏ (–±—ã—Å—Ç—Ä–µ–µ)
docker-compose -f docker-compose.registry.yml up
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—É–±–ª–∏—á–Ω—ã–µ –æ–±—Ä–∞–∑—ã:**
- `ghcr.io/nvalkg/aidd-bot:latest`
- `ghcr.io/nvalkg/aidd-api:latest`
- `ghcr.io/nvalkg/aidd-frontend:latest`

–û–±—Ä–∞–∑—ã –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (`docker login` –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
devops/
‚îú‚îÄ‚îÄ Dockerfile.bot              # –û–±—Ä–∞–∑ –¥–ª—è Telegram –±–æ—Ç–∞
‚îú‚îÄ‚îÄ Dockerfile.api              # –û–±—Ä–∞–∑ –¥–ª—è API —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ Dockerfile.frontend         # –û–±—Ä–∞–∑ –¥–ª—è Frontend
‚îú‚îÄ‚îÄ .dockerignore.bot           # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è bot
‚îú‚îÄ‚îÄ .dockerignore.api           # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è api
‚îú‚îÄ‚îÄ .dockerignore.frontend      # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è frontend
‚îú‚îÄ‚îÄ entrypoint.sh               # –°–∫—Ä–∏–ø—Ç –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ docker-compose.yml          # –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
‚îú‚îÄ‚îÄ docker-compose.registry.yml # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤ –∏–∑ GHCR
‚îî‚îÄ‚îÄ doc/
    ‚îú‚îÄ‚îÄ devops-roadmap.md       # –†–æ–∞–¥–º–∞–ø DevOps –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
    ‚îú‚îÄ‚îÄ d0-completion-report.md # –û—Ç—á–µ—Ç –æ —Å–ø—Ä–∏–Ω—Ç–µ D0
    ‚îú‚îÄ‚îÄ plans/                  # –ü–ª–∞–Ω—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ø—Ä–∏–Ω—Ç–æ–≤
    ‚îî‚îÄ‚îÄ guides/                 # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–æ–π
docker-compose up

# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker-compose up --build
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤ –∏–∑ registry

```bash
# –°–∫–∞—á–∞—Ç—å –æ–±—Ä–∞–∑—ã –∏–∑ GHCR
docker-compose -f docker-compose.registry.yml pull

# –ó–∞–ø—É—Å–∫ —Å –æ–±—Ä–∞–∑–∞–º–∏ –∏–∑ registry
docker-compose -f docker-compose.registry.yml up

# –í —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose -f docker-compose.registry.yml up -d
```

### –û–±—â–∏–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–≤–∫–ª—é—á–∞—è –¥–∞–Ω–Ω—ã–µ –ë–î)
docker-compose down -v
```

## –ü–æ–¥—Ö–æ–¥

MVP DevOps - —Ñ–æ–∫—É—Å –Ω–∞ –ø—Ä–æ—Å—Ç–æ—Ç–µ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏, –±—ã—Å—Ç—Ä—ã–π –ø—É—Ç—å –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –¥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ.

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** ‚úÖ –°–ø—Ä–∏–Ω—Ç D0 –∑–∞–≤–µ—Ä—à–µ–Ω - –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker –≥–æ—Ç–æ–≤

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û–±—â–µ–µ
- üìã [DevOps Roadmap](doc/devops-roadmap.md) - –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- üê≥ [Docker Quickstart](doc/guides/docker-quickstart.md) - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É
- ‚ö° [Quick Reference](QUICK-REFERENCE.md) - —à–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
- üéØ [Next Steps](NEXT-STEPS.md) - —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è D1

### –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞
- üöÄ [GitHub Actions Intro](doc/guides/github-actions-intro.md) - –≤–≤–µ–¥–µ–Ω–∏–µ –≤ CI/CD
- üîì [Make Images Public](doc/guides/make-images-public.md) - –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –æ–±—Ä–∞–∑—ã –ø—É–±–ª–∏—á–Ω—ã–º–∏
- üìö [–í—Å–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞](doc/README.md) - –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –°–ø—Ä–∏–Ω—Ç D0 (‚úÖ Completed)
- üìù [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](doc/plans/d0-basic-docker-setup.md) - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω
- üéØ [–ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç](doc/reports/d0-summary.md) - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≤—ã–≤–æ–¥—ã
- üß™ [–û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏](doc/reports/d0-testing-report.md) - smoke tests
- üìä [Completion Report](doc/d0-completion-report.md) - –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

### –°–ø—Ä–∏–Ω—Ç D1 (üöß In Progress)
- üìù [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](doc/plans/d1-build-publish.md) - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω
- üéØ [–ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç](doc/reports/d1-summary.md) - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≤—ã–≤–æ–¥—ã (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)
- üß™ [–û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏](doc/reports/d1-testing-report.md) - —á–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
