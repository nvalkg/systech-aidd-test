# üéâ –°–ø—Ä–∏–Ω—Ç D0 - Basic Docker Setup –ó–ê–í–ï–†–®–ï–ù!

**–î–∞—Ç–∞:** 18 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Completed
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~2 —á–∞—Å–∞

## üéØ –¶–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞

‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ docker-compose –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π: `docker-compose up`

## üì¶ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ

### Docker –æ–±—Ä–∞–∑—ã (3 —à—Ç.)
- ‚úÖ `devops/Dockerfile.bot` - Telegram –±–æ—Ç (Python 3.11 + UV)
- ‚úÖ `devops/Dockerfile.api` - FastAPI —Å–µ—Ä–≤–µ—Ä (Python 3.11 + UV)
- ‚úÖ `devops/Dockerfile.frontend` - Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Node 20 + pnpm)

### Docker Ignore —Ñ–∞–π–ª—ã (3 —à—Ç.)
- ‚úÖ `devops/.dockerignore.bot` - –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è bot
- ‚úÖ `devops/.dockerignore.api` - –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è api
- ‚úÖ `devops/.dockerignore.frontend` - –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è frontend

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ `devops/docker-compose.yml` - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è 4 —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ `devops/entrypoint.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ `.env.example` - —à–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (5 —Ñ–∞–π–ª–æ–≤)
- ‚úÖ `devops/README.md` - –æ–ø–∏—Å–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- ‚úÖ `devops/doc/guides/docker-quickstart.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- ‚úÖ `devops/doc/plans/d0-basic-docker-setup.md` - –ø–ª–∞–Ω —Å–ø—Ä–∏–Ω—Ç–∞
- ‚úÖ `devops/doc/d0-completion-report.md` - –æ—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏
- ‚úÖ `devops/TESTING.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `README.md` (–∫–æ—Ä–µ–Ω—å) - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è Docker
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `devops/doc/devops-roadmap.md` - —Å—Ç–∞—Ç—É—Å D0 ‚Üí Completed

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫

```bash
cd devops
docker-compose up
```

### –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

| –°–µ—Ä–≤–∏—Å | URL/–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ | –ü–æ—Ä—Ç |
|--------|-------------------|------|
| Frontend | http://localhost:3000 | 3000 |
| API | http://localhost:8000 | 8000 |
| API Docs | http://localhost:8000/docs | 8000 |
| PostgreSQL | localhost:5433 | 5433 |
| Bot | Telegram | - |

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫
docker-compose up

# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
docker-compose up -d

# –õ–æ–≥–∏
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
docker-compose down -v
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### MVP –ø–æ–¥—Ö–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

1. ‚úÖ **Single-stage Dockerfiles** - –ø—Ä–æ—Å—Ç—ã–µ, –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
2. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏** - —á–µ—Ä–µ–∑ entrypoint.sh
3. ‚úÖ **–ë–∞–∑–æ–≤—ã–µ .dockerignore** - —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
4. ‚úÖ **Healthcheck PostgreSQL** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞
5. ‚úÖ **–û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞** - docker-compose up –¥–ª—è –≤—Å–µ–≥–æ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
docker-compose.yml
‚îú‚îÄ‚îÄ postgres (PostgreSQL 16 Alpine)
‚îÇ   ‚îú‚îÄ‚îÄ healthcheck ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ volume –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ bot (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç postgres healthy)
‚îÇ   ‚îú‚îÄ‚îÄ entrypoint.sh ‚Üí –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ python -m src
‚îú‚îÄ‚îÄ api (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç postgres healthy)
‚îÇ   ‚îú‚îÄ‚îÄ entrypoint.sh ‚Üí –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ uvicorn –Ω–∞ –ø–æ—Ä—Ç—É 8000
‚îî‚îÄ‚îÄ frontend (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç api)
    ‚îú‚îÄ‚îÄ pnpm build
    ‚îî‚îÄ‚îÄ pnpm start –Ω–∞ –ø–æ—Ä—Ç—É 3000
```

## üìä –ú–µ—Ç—Ä–∏–∫–∏

- **–§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ:** 13
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞/–∫–æ–Ω—Ñ–∏–≥–∞:** ~800
- **–°–µ—Ä–≤–∏—Å–æ–≤:** 4 (PostgreSQL, Bot, API, Frontend)
- **Docker –æ–±—Ä–∞–∑–æ–≤:** 3
- **–í—Ä–µ–º—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:** ~5-10 –º–∏–Ω—É—Ç
- **–ö–æ–º–∞–Ω–¥ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞:** 1 (`docker-compose up`)

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–≠—Ç–∞–ø 1: Dockerfiles**
- [x] Dockerfile.bot —Å–æ–∑–¥–∞–Ω
- [x] Dockerfile.api —Å–æ–∑–¥–∞–Ω
- [x] Dockerfile.frontend —Å–æ–∑–¥–∞–Ω

**–≠—Ç–∞–ø 2: Docker Ignore**
- [x] .dockerignore.bot —Å–æ–∑–¥–∞–Ω
- [x] .dockerignore.api —Å–æ–∑–¥–∞–Ω
- [x] .dockerignore.frontend —Å–æ–∑–¥–∞–Ω

**–≠—Ç–∞–ø 3: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
- [x] entrypoint.sh —Å–æ–∑–¥–∞–Ω (–º–∏–≥—Ä–∞—Ü–∏–∏)
- [x] docker-compose.yml —Å–æ–∑–¥–∞–Ω (4 —Å–µ—Ä–≤–∏—Å–∞)
- [x] .env.example —Å–æ–∑–¥–∞–Ω

**–≠—Ç–∞–ø 4: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- [x] docker-quickstart.md —Å–æ–∑–¥–∞–Ω
- [x] README.md –æ–±–Ω–æ–≤–ª–µ–Ω (–∫–æ—Ä–µ–Ω—å)
- [x] devops/README.md –æ–±–Ω–æ–≤–ª–µ–Ω
- [x] TESTING.md —Å–æ–∑–¥–∞–Ω

**–≠—Ç–∞–ø 5: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è**
- [x] devops-roadmap.md –æ–±–Ω–æ–≤–ª–µ–Ω
- [x] –ü–ª–∞–Ω —Å–ø—Ä–∏–Ω—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- [x] –û—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å–æ–∑–¥–∞–Ω

## üéì –ß—Ç–æ —É–∑–Ω–∞–ª–∏

1. UV –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
2. Healthcheck –¥–ª—è PostgreSQL –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω
3. Entrypoint —Å–∫—Ä–∏–ø—Ç —É–ø—Ä–æ—â–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
4. Single-stage –æ–±—Ä–∞–∑—ã –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã –¥–ª—è MVP
5. Docker Compose –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üöß –ß—Ç–æ –ù–ï –¥–µ–ª–∞–ª–∏ (–Ω–∞–º–µ—Ä–µ–Ω–Ω–æ, MVP!)

- ‚ùå Multi-stage builds (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–æ–≤)
- ‚ùå Docker image scanning (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- ‚ùå Hadolint –ø—Ä–æ–≤–µ—Ä–∫–∏ (–ª–∏–Ω—Ç–µ—Ä –¥–ª—è Dockerfile)
- ‚ùå Health checks –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (—Ç–æ–ª—å–∫–æ –¥–ª—è PostgreSQL)
- ‚ùå Resource limits (CPU, memory)
- ‚ùå Production-ready –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚ùå SSL/TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- ‚ùå –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

**–í—Å–µ —ç—Ç–æ –¥–æ–±–∞–≤–∏–º –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ø—Ä–∏–Ω—Ç–∞—Ö!**

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –°–ø—Ä–∏–Ω—Ç D1: Build & Publish (—Å–ª–µ–¥—É—é—â–∏–π)

**–¶–µ–ª—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—Ä–∞–∑–æ–≤ –≤ GitHub Container Registry

**–ó–∞–¥–∞—á–∏:**
- GitHub Actions workflow –¥–ª—è —Å–±–æ—Ä–∫–∏
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ ghcr.io
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤ (latest + tags)
- Badges —Å—Ç–∞—Ç—É—Å–∞ —Å–±–æ—Ä–∫–∏

**–í—Ä–µ–º—è:** ~2-3 —á–∞—Å–∞

### –°–ø—Ä–∏–Ω—Ç D2: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–¶–µ–ª—å:** –†—É—á–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

**–ó–∞–¥–∞—á–∏:**
- –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–µ–ø–ª–æ—è
- SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤
- –ó–∞–ø—É—Å–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –°–ø—Ä–∏–Ω—Ç D3: Auto Deploy

**–¶–µ–ª—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions

**–ó–∞–¥–∞—á–∏:**
- Workflow –¥–ª—è –¥–µ–ø–ª–æ—è
- SSH –∏–∑ GitHub Actions
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üéä –ò—Ç–æ–≥

**–°–ø—Ä–∏–Ω—Ç D0 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω!**

–¢–µ–ø–µ—Ä—å –ª—é–±–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–∂–µ—Ç:
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env` —Ñ–∞–π–ª
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å `cd devops && docker-compose up`
4. **–ü–æ–ª—É—á–∏—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å—Ç–µ–∫ –∑–∞ 10 –º–∏–Ω—É—Ç!**

**–ì–æ—Ç–æ–≤–æ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ø—Ä–∏–Ω—Ç—É!** üöÄ

---

**–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**
- üìã [DevOps Roadmap](doc/devops-roadmap.md)
- üê≥ [Docker Quickstart](doc/guides/docker-quickstart.md)
- üß™ [Testing Instructions](TESTING.md)
- üìä [Completion Report](doc/d0-completion-report.md)
